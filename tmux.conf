run "~/.tmux/cgclassify"

set -s default-terminal "tmux-256color"
set -s escape-time 0
set -s focus-events on

set -g assume-paste-time 10
set -g base-index 1
set -g display-time 0
set -g history-limit 50000
set -g mouse on
set -g renumber-windows on
set -ag update-environment "DISPLAY SSH_CLIENT SSH_CONNECTION XAUTHORITY"

set -wg aggressive-resize on
set -wg allow-rename off
set -wg automatic-rename-format "#{?pane_in_mode,[tmux],#{pane_current_command}}"
set -wg mode-keys vi
set -wg mode-style "fg=colour235,bg=colour227"
set -wg pane-base-index 1
set -wg xterm-keys on

set -g message-command-style "fg=colour252,bg=colour238"
set -g message-style "fg=colour252,bg=colour238"
set -g status on
set -g status-interval 5
set -g status-justify left
set -g status-keys emacs
set -g status-left "#(~/.tmux/statusline left)"
set -g status-left-length 100
set -g status-right "#(~/.tmux/statusline right)"
set -g status-right-length 100
set -g status-style "fg=colour252,bg=colour238"
set -wg pane-active-border-style "fg=colour117"
set -wg pane-border-style "fg=colour238"
set -wg window-status-current-format "#(~/.tmux/statusline cwindow)"
set -wg window-status-format "#(~/.tmux/statusline window)"
set -wg window-status-separator ""

set -g prefix C-j
unbind C-b
bind C-j send-prefix

bind C-l refresh-client
bind C-h clear-history
bind & confirm-before -p "kill-session #S? (y/n)" kill-session
bind f run "~/.tmux/freezer toggle pane" \; refresh-client -S
bind F run "~/.tmux/freezer toggle www-browser" \; refresh-client -S
bind C-f run "~/.tmux/freezer toggle emerge" \; refresh-client -S
bind r source ~/.tmux.conf \; display "Reloaded!"

bind C new-window sudo -i
bind -r C-p select-window -t :-
bind -r C-n select-window -t :+
bind -r < swap-window -t :-
bind -r > swap-window -t :+
bind N command-prompt -I "#W" "rename-window '%%'"
bind X confirm-before -p "kill-window #W? (y/n)" kill-window

bind s if "(( $(ps -o 'euid=' #{pane_pid}) == 0 ))" \
       "split-window -h sudo -i" "split-window -h"
bind S if "(( $(ps -o 'euid=' #{pane_pid}) == 0 ))" \
       "split-window -v sudo -i" "split-window -v"
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5
bind '"' join-pane
bind % swap-pane
bind x confirm-before -p "kill-pane #{pane_current_command}? (y/n)" kill-pane

bind -n MouseDown1Pane select-pane -t= \; send-keys -M
bind -n MouseDown2Pane select-pane -t= \; \
   if -Ft= "#{mouse_any_flag}" "send-keys -M" "select-pane -m"
bind -n MouseDown3Pane select-pane -t= \; send-keys -M
bind -n MouseDrag1Pane select-pane -t= \; \
   if -Ft= "#{?pane_in_mode,0,#{mouse_any_flag}}" "send-keys -M" "copy-mode -M"

bind v copy-mode
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi V send -X select-line
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind - choose-buffer "delete-buffer -b '%%'"

run "~/.tmux/keybinds"

setenv -g TERM "xterm-256color"
setenv -g LANG "en_US.UTF-8"
setenv -g LC_MESSAGE "en_US.UTF-8"
setenv -g LANGUAGE "en_US"
