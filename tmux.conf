run "~/.tmux/cgclassify"

set -s default-terminal "tmux-256color"
set -s escape-time 0
set -s focus-events on
set -g assume-paste-time 100
set -g mouse on
setw -g mode-keys vi
setw -g xterm-keys on

setw -g aggressive-resize on
setw -g allow-rename off
setw -g automatic-rename-format '#{?pane_in_mode,[tmux],#{pane_current_command}}'

set -g base-index 1
setw -g pane-base-index 1
set -g display-time 4000
set -g history-limit 50000
set -g renumber-windows on

set -g status "on"
set -g status-interval 5
set -g status-justify "left"
set -g status-keys emacs
set -g status-attr "none"
set -g status-bg "colour238"
set -g status-left-attr "none"
set -g status-left-length "100"
set -g status-right-attr "none"
set -g status-right-length "100"
set -g message-bg "colour238"
set -g message-fg "colour252"
set -g message-command-bg "colour238"
set -g message-command-fg "colour252"
set -g pane-active-border-fg "colour117"
set -g pane-border-fg "colour238"
setw -g window-status-activity-attr "none"
setw -g window-status-activity-bg "colour235"
setw -g window-status-activity-fg "colour117"
setw -g window-status-attr "none"
setw -g window-status-bg "colour238"
setw -g window-status-fg "colour248"
setw -g window-status-separator ""
set -g status-left "#(~/.tmux/statusline left)"
set -g status-right "#(~/.tmux/statusline right)"
setw -g window-status-format "#(~/.tmux/statusline window)"
setw -g window-status-current-format "#(~/.tmux/statusline cwindow)"

set -g prefix C-j
unbind C-b
bind C-j send-prefix

bind s split-window -h
bind S split-window -v
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5
bind ! break-pane
bind '"' join-pane
bind % swap-pane
bind x confirm-before -p "kill-pane #{pane_current_command}? (y/n)" kill-pane

bind -r C-p select-window -t :-
bind -r C-n select-window -t :+
bind -r < swap-window -t :-
bind -r > swap-window -t :+
bind N command-prompt -I '#W' "rename-window '%%'"
bind X confirm-before -p "kill-window #W? (y/n)" kill-window

bind C-l refresh-client
bind C-h clear-history
bind '$' command-prompt -I '#S' "rename-session '%%'"
bind & confirm-before -p "kill-session #S? (y/n)" kill-session
bind f run "~/.tmux/freezer -p toggle" \; refresh-client -S
bind F run "~/.tmux/freezer -w toggle" \; refresh-client -S
bind C-f run "~/.tmux/freezer -e toggle" \; refresh-client -S
bind r source ~/.tmux.conf \; display "Reloaded!"

bind v copy-mode
bind -t vi-copy v begin-selection
bind -t vi-copy V select-line
bind -t vi-copy C-v rectangle-toggle
bind -t vi-copy y copy-pipe "xsel -l /dev/null -ib"
bind p run "xsel -ob | tmux load-buffer -; tmux paste-buffer -r"
bind '#' choose-buffer
bind - choose-buffer "delete-buffer -b '%%'"

if "test ! -f ~/.tmux/plugins/tpm/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm'"
set -g @plugin 'NHDaly/tmux-scroll-copy-mode'
set -g @plugin 'tmux-plugins/tmux-open'
run '~/.tmux/plugins/tpm/tpm'
run '~/.tmux/plugins/tpm/bin/install_plugins'
run '~/.tmux/plugins/tpm/bin/clean_plugins'
