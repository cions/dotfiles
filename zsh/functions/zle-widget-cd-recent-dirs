# vim: set ft=zsh:

emulate -L zsh

local file selected

if (( ! ${+commands[fzy]} )) return
zstyle -s ':chpwd:*' recent-dirs-file file || return
if [[ ! -f ${file} ]] return

echoti cud1
selected="$(print -rl -- "${(@fQ)$(<${file})}" | fzy)"
echoti cuu1
zle reset-prompt
if [[ -z ${selected} ]] return

BUFFER="cd ${(q)selected}"
zle accept-line
